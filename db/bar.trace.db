2018-04-12 18:57:00 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: Table "CLIENTES" not found; SQL statement:
SELECT nome, idade, cpf, genero, socio, numSocio FROM clientes [42102-197]
2018-04-12 18:57:09 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: Constraint "PK_CLIENTE" already exists; SQL statement:


ALTER TABLE Cliente ADD CONSTRAINT PK_Cliente PRIMARY KEY (cpf);


CREATE TABLE IF NOT EXISTS Caixa (
 id_caixa INT NOT NULL,
 dia DATE NOT NULL,
 aberto BOOLEAN DEFAULT FALSE NOT NULL
);

ALTER TABLE Caixa ADD CONSTRAINT PK_Caixa PRIMARY KEY (id_caixa);


CREATE TABLE IF NOT EXISTS Cliente_Caixa (
 id_cliente_caixa INT NOT NULL,
 cpf CHAR(11) NOT NULL,
 id_caixa INT NOT NULL
);

ALTER TABLE Cliente_Caixa ADD CONSTRAINT PK_Cliente_Caixa PRIMARY KEY (id_cliente_caixa,cpf,id_caixa);


CREATE TABLE IF NOT EXISTS RegistroEntradaSaida (
 id_registro INT NOT NULL,
 id_cliente_caixa INT NOT NULL,
 cpf CHAR(11) NOT NULL,
 id_caixa INT NOT NULL,
 entrou BOOLEAN DEFAULT FALSE NOT NULL,
 horario_entrada TIME NOT NULL,
 horario_saida TIME
);

ALTER TABLE RegistroEntradaSaida ADD CONSTRAINT PK_RegistroEntradaSaida PRIMARY KEY (id_registro,id_cliente_caixa,cpf,id_caixa);

ALTER TABLE Cliente_Caixa ADD CONSTRAINT FK_Cliente_Caixa_0 FOREIGN KEY (cpf) REFERENCES Cliente (cpf);
ALTER TABLE Cliente_Caixa ADD CONSTRAINT FK_Cliente_Caixa_1 FOREIGN KEY (id_caixa) REFERENCES Caixa (id_caixa);
ALTER TABLE RegistroEntradaSaida ADD CONSTRAINT FK_RegistroEntradaSaida_0 FOREIGN KEY (id_cliente_caixa,cpf,id_caixa) REFERENCES Cliente_Caixa (id_cliente_caixa,cpf,id_caixa);


 [90045-197]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:357)
	at org.h2.message.DbException.get(DbException.java:179)
	at org.h2.message.DbException.get(DbException.java:155)
	at org.h2.command.ddl.AlterTableAddConstraint.tryUpdate(AlterTableAddConstraint.java:110)
	at org.h2.command.ddl.AlterTableAddConstraint.update(AlterTableAddConstraint.java:78)
	at org.h2.command.CommandContainer.update(CommandContainer.java:102)
	at org.h2.command.Command.executeUpdate(Command.java:261)
	at org.h2.command.CommandList.update(CommandList.java:42)
	at org.h2.command.CommandList.executeRemaining(CommandList.java:36)
	at org.h2.command.CommandList.update(CommandList.java:43)
	at org.h2.command.Command.executeUpdate(Command.java:261)
	at org.h2.jdbc.JdbcPreparedStatement.execute(JdbcPreparedStatement.java:249)
	at pucrs.gcs.cdl.persistence.DbConnection.createTable(DbConnection.java:58)
	at pucrs.gcs.cdl.persistence.DbConnection.open(DbConnection.java:40)
	at pucrs.gcs.cdl.persistence.DbConnection.getClientes(DbConnection.java:62)
	at pucrs.gcs.cdl.persistence.DbConnection.getClientes(DbConnection.java:78)
	at pucrs.gcs.cdl.business.BarController.consultaClientes(BarController.java:35)
	at pucrs.gcs.cdl.uinterface.App.main(App.java:14)
2018-04-12 18:57:34 jdbc[3]: exception
org.h2.jdbc.JdbcSQLException: Constraint "PK_CLIENTE" already exists; SQL statement:


ALTER TABLE Cliente ADD CONSTRAINT PK_Cliente PRIMARY KEY (cpf);


CREATE TABLE IF NOT EXISTS Caixa (
 id_caixa INT NOT NULL,
 dia DATE NOT NULL,
 aberto BOOLEAN DEFAULT FALSE NOT NULL
);

ALTER TABLE Caixa ADD CONSTRAINT PK_Caixa PRIMARY KEY (id_caixa);


CREATE TABLE IF NOT EXISTS Cliente_Caixa (
 id_cliente_caixa INT NOT NULL,
 cpf CHAR(11) NOT NULL,
 id_caixa INT NOT NULL
);

ALTER TABLE Cliente_Caixa ADD CONSTRAINT PK_Cliente_Caixa PRIMARY KEY (id_cliente_caixa,cpf,id_caixa);


CREATE TABLE IF NOT EXISTS RegistroEntradaSaida (
 id_registro INT NOT NULL,
 id_cliente_caixa INT NOT NULL,
 cpf CHAR(11) NOT NULL,
 id_caixa INT NOT NULL,
 entrou BOOLEAN DEFAULT FALSE NOT NULL,
 horario_entrada TIME NOT NULL,
 horario_saida TIME
);

ALTER TABLE RegistroEntradaSaida ADD CONSTRAINT PK_RegistroEntradaSaida PRIMARY KEY (id_registro,id_cliente_caixa,cpf,id_caixa);

ALTER TABLE Cliente_Caixa ADD CONSTRAINT FK_Cliente_Caixa_0 FOREIGN KEY (cpf) REFERENCES Cliente (cpf);
ALTER TABLE Cliente_Caixa ADD CONSTRAINT FK_Cliente_Caixa_1 FOREIGN KEY (id_caixa) REFERENCES Caixa (id_caixa);
ALTER TABLE RegistroEntradaSaida ADD CONSTRAINT FK_RegistroEntradaSaida_0 FOREIGN KEY (id_cliente_caixa,cpf,id_caixa) REFERENCES Cliente_Caixa (id_cliente_caixa,cpf,id_caixa);


 [90045-197]
	at org.h2.message.DbException.getJdbcSQLException(DbException.java:357)
	at org.h2.message.DbException.get(DbException.java:179)
	at org.h2.message.DbException.get(DbException.java:155)
	at org.h2.command.ddl.AlterTableAddConstraint.tryUpdate(AlterTableAddConstraint.java:110)
	at org.h2.command.ddl.AlterTableAddConstraint.update(AlterTableAddConstraint.java:78)
	at org.h2.command.CommandContainer.update(CommandContainer.java:102)
	at org.h2.command.Command.executeUpdate(Command.java:261)
	at org.h2.command.CommandList.update(CommandList.java:42)
	at org.h2.command.CommandList.executeRemaining(CommandList.java:36)
	at org.h2.command.CommandList.update(CommandList.java:43)
	at org.h2.command.Command.executeUpdate(Command.java:261)
	at org.h2.jdbc.JdbcPreparedStatement.execute(JdbcPreparedStatement.java:249)
	at pucrs.gcs.cdl.persistence.DbConnection.createTable(DbConnection.java:58)
	at pucrs.gcs.cdl.persistence.DbConnection.open(DbConnection.java:40)
	at pucrs.gcs.cdl.persistence.DbConnection.getClientes(DbConnection.java:62)
	at pucrs.gcs.cdl.persistence.DbConnection.getClientes(DbConnection.java:78)
	at pucrs.gcs.cdl.business.BarController.consultaClientes(BarController.java:35)
	at pucrs.gcs.cdl.uinterface.App.main(App.java:14)
